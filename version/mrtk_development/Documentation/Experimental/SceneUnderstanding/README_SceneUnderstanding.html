<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>MRTK Scene Understanding Demo | Mixed Reality Toolkit Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="MRTK Scene Understanding Demo | Mixed Reality Toolkit Documentation ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href="../../.././Documentation/Images/favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-177859076-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-177859076-1');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../.././Documentation/Images/mrt_logo_icon.png" alt="">
              </a>
            </div>
          
          <div class="version-dropdown" id="versionDropdown">
           </div>
         
          <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="mrtk-scene-understanding-demo">MRTK Scene Understanding Demo</h1>

<p>Scene Understanding will return a semantic representation of scene entities as well as their geometric forms on <strong>HoloLens 2</strong> (not HoloLens 1!).</p>
<p>Expected use cases of this technology include:</p>
<ul>
<li>Placement. Objects on nearest surface such as wall or platform</li>
<li>Construct nav-mesh for platform style games</li>
<li>Provide physics engine friendly geometry as quads</li>
<li>Accelerlate development by avoiding the need to write similar algorithims</li>
</ul>
<p>This is an <strong>experminental</strong> prelease that integrates <a href="https://docs.microsoft.com/en-us/windows/mixed-reality/scene-understanding">Scene Understanding</a> as a new MRTK spatial observer.</p>
<h2 id="goals-and-features-of-the-demo">Goals and features of the demo</h2>
<ul>
<li>Demo scene with visualization of Scene Objects with options for configuring the observer</li>
<li>Example script that excersises the event system demonstrating common tasks</li>
<li>Save device room data for offline development</li>
<li>In-editor workflow for developing with previously saved room data (.bytes files)</li>
<li>For the first time, access to the highest possible resolution of the world mesh!</li>
</ul>
<h2 id="observer-overview">Observer overview</h2>
<p>When asked, the <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/ff68a86445152d98ee5b0b1a25bd5f303169e4ed/Assets/MixedRealityToolkit.Providers/Experimental/WindowsMixedReality/WindowsMixedRealitySpatialAwarenessSceneUnderstandingObserver.cs">Scene Understanding Observer</a> will return <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/ff68a86445152d98ee5b0b1a25bd5f303169e4ed/Assets/MixedRealityToolkit/Definitions/SpatialAwareness/Experimental/SpatialAwarenessSceneObject.cs">Scene Objects</a> with attributes useful for mixed world development. What is returned is dependent on the configuration of the observer when fetched. For instance, one may want the occlusion mask, the observer must be configured to generate quads.</p>
<p>It is expected the majority of &quot;real&quot; applications will never show the underlying data in raw form.</p>
<h2 id="background-and-development-notes">Background and development notes</h2>
<p>This feature built atop Spatial Awareness is based on scene understanding technology from Microsoft.</p>
<p>The Scene Understanding observer inherits from the older spatial awareness infrastructure, and thus the implementation is and odd fit in places.</p>
<p>Scene Understanding is a <strong>platform specific</strong> technology. Spatial Awareness is meant to cover <em>platform agnostic</em> capabilities. With few data points, it's likely we don't have the proper abstraction yet.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Ensure build settings' platform is set to UWP.</p>
<p>Ensure your project is configured to use MSBuild.</p>
<p>A restart of the unity editor maybe required if there are errors about missing assembly references. This should trigger download of packages.</p>
<p><img src="Images/ConfigureMRTKMSBuildMenu.jpg" alt="Manage MRTK Configuration"></p>
<p><img src="Images/MRTKProjectConfiguratorMSBuildEnabled.jpg" alt="MSBuild enabled"></p>
<h2 id="demonstration-and-debugging-scene-understanding">Demonstration and debugging Scene Understanding</h2>
<h3 id="unity-demo-scene">Unity demo scene</h3>
<p>Open the scene file and press play!</p>
<p><code>Assets/MixedRealityToolkit.Examples/Experimental/SpatialAwareness/DemoSpatialAwareness.unity</code></p>
<h4 id="configuring-the-observer-service">Configuring the observer service</h4>
<p>Select the 'MixedRealityTookit' game object and check the inspector.</p>
<p><img src="Images/MRTKHierarchy.png" alt="scene understanding location in heirarchy">
<img src="Images/MRTKLocation.png" alt="mrkt location in inspector"></p>
<p>These options will allow one to configure the observer on play.</p>
<p>Press play at this point the example serialized scene data will be loaded and displayed in the editor (assuming the observer is configured to show 'debug' objects)</p>
<h3 id="example-script">Example script</h3>
<p>The example script <em>DemoSpatialAwarenessController.cs</em>, demonstrates the major concepts in working with the Scene Understanding service.</p>
<ul>
<li>Subscribing to Scene Understanding events</li>
<li>Handling Scene Understanding events</li>
<li>Finding the nearest platform</li>
<li>Instantiating a prefab and placing it in an open spot</li>
</ul>
<p>This example script uses MRKT UI to toggle service features on the Spatial Understanding observer.</p>
<p>Turning on <em>Instantiate Prefabs</em>, will demonstrate creating objects that size to fit themselves to all <a href="https://github.com/microsoft/MixedRealityToolkit-Unity/blob/ff68a86445152d98ee5b0b1a25bd5f303169e4ed/Assets/MixedRealityToolkit/Definitions/SpatialAwareness/Experimental/SpatialAwarenessSceneObject.cs">Scene Objects</a>, gathered neatly under a parent object.</p>
<p><img src="Images/Controller.png" alt="demo controller options"></p>
<h3 id="built-app-notes">Built app notes</h3>
<p>Build and deploy to HoloLens in the standard way. Once running, a number of buttons should appear to play with the features.</p>
<p>The &quot;Place&quot; button will make a prefab appear on the nearest platform. (which may be behind the person!) One should hear a spatial sound when this occurs in order to help locate it.</p>
<p>Note, their are some pit falls in making queries to the observer. Misconfiguration of a fetch request result in your event payload not containing the expected data. For example, if one dosen't request quads, then no occlusion mask textures will be present. Like wise, no world mesh will appear if the observer is not configured to request meshes. The <code>DemoSpatialAwarenessController</code> script takes care of some of these dependencies, but not all.</p>
<p>Saved .bytes files can be accessed through the <a href="https://docs.microsoft.com/en-us/windows/mixed-reality/using-the-windows-device-portal">device portal</a> at <code>User Folders/LocalAppData/.../LocalState/PREFIX_yyyyMMdd_hhmmss.bytes</code>. These <code>bytes</code> can be used in edtor by specifying them in the observer profile found in the inspector.</p>
<p><img src="Images/BytesInDevicePortal.png" alt="Device Portal location of bytes file">
<img src="Images/BytesLocationInObserver.png" alt="Serialized scene bytes in observer"></p>
<h1 id="see-also">See Also</h1>
<ul>
<li><a href="https://docs.microsoft.com/en-us/windows/mixed-reality/scene-understanding">https://docs.microsoft.com/en-us/windows/mixed-reality/scene-understanding</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/mixed-reality/scene-understanding-sdk">https://docs.microsoft.com/en-us/windows/mixed-reality/scene-understanding-sdk</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/mrtk_development/Documentation/Experimental/SceneUnderstanding/README_SceneUnderstanding.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
